<h1>List of Users</h1>

<table border="1">
  <tr>
    <th>Username</th>
    <th>Private?</th>
    <th></th>
    <th></th>
  </tr>

  <% @list_of_users.each do |a_user| %>
    <tr>
      <td>
        <%= a_user.username %>
      </td>

      <td>
        <% if a_user.private == true %>
          Yes
        <% else %>
          No 
        <% end %>
      </td>

      <td>
        <% if session.fetch(:user_id) != nil%>
          <% if a_user.private? %>

            <form action="/insert_follow_request" method="post">
              <input type="hidden" name="query_status" value="pending">
             
              <button>Follow</button>
            </form>
        <% else %>
            <form action="/insert_follow_request" method="post">
              <input type="hidden" name="query_status" value="accepted">
             
              <button>Follow</button>
            </form>
        <% end %>
        <% end%>
      </td>

      <td>
        <a href="/users/<%= a_user.username %>">Show details</a>
      </td>
    </tr>
  <% end %>
</table>
